#matlab-raymarching

### TODO:
- Ускорение GPU.
- Альтернативные модели освещения.
- Добавить методы для трансформаций и операторы пересечения объектов.
- Разобраться с полосами на тенях.
- Отрисовка отражений.
- Рефакторинг кода,  распихать все по классам и пакетам.
- Удобные методы для быстрого задания сцены из командного окна.
- Документация.

### Цель проекта
Создать удобный тулбокс для MATLAB для быстрого создания трехмерной визуализации чего-либо, будь то модели из примитивов, шумы или фракталы.

### Что работает
- Базовые знаковые функции расстояния (SDF).
	- Сфера.
	- Куб.
	- Тор.
- Простые материалы с диффузным цветом.
- Мягкие тени.
- Несколько источников освещения, можно задать цвет.
- Простые операторы пересечения: объединение и вычитание.

### Основные проблемы
- Рендеринг на CPU катастрофически медленный.
- Артефакты в виде колец при отрисовке теней.

###  Запуск тестовой сцены
Необходим [MATLAB Image processing toolbox](https://www.mathworks.com/products/image.html "MATLAB Image processing toolbox.").

В командном окне вызвать `imshow(Shader(128, 128))` для рендеринга тестовой сцены, где 128, 128 это разрешение выходного изображения.

![Рендер в окне MATLAB.](https://i.imgur.com/4qVCTRM.jpg "Рендер в окне MATLAB.")

### Редактирование сцены
На данный момент сцена задается в файле `GetDist.m`.
Источники освещения редактируются в файле `MainImage.m`.

### Параллельные вычисления
Пока нет поддержки GPU, используется цикл `parfor`, который запускает несколько параллельных работников, используюя потенциал CPU на максимум.

Чтобы оставить обычный однопоточный режим, в `Shader.m` необходимо заменить `parfor` на обычный `for`.